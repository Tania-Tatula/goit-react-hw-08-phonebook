(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[0],{14:function(t,e,n){"use strict";n.d(e,"b",(function(){return x})),n.d(e,"a",(function(){return w})),n.d(e,"c",(function(){return U}));var c,r,a,o=n(2),s=Object(o.b)("auth/registerRequest"),u=Object(o.b)("auth/registerSuccess"),i=Object(o.b)("auth/registerError"),l=Object(o.b)("auth/loginRequest"),b=Object(o.b)("auth/loginSuccess"),j=Object(o.b)("auth/loginError"),d={registerRequest:s,registerSuccess:u,registerError:i,logoutRequest:Object(o.b)("auth/logoutRequest"),logoutSuccess:Object(o.b)("auth/logoutSuccess"),logoutError:Object(o.b)("auth/logoutError"),loginRequest:l,loginSuccess:b,loginError:j,getCurrentUserRequest:Object(o.b)("auth/getCurrentUserRequest"),getCurrentUserSuccess:Object(o.b)("auth/getCurrentUserSuccess"),getCurrentUserError:Object(o.b)("auth/getCurrentUserError")},f=n(5),h=n(6),p={name:null,email:null},O=Object(o.c)(p,(c={},Object(f.a)(c,d.registerSuccess,(function(t,e){return e.payload.user})),Object(f.a)(c,d.loginSuccess,(function(t,e){return e.payload.user})),Object(f.a)(c,d.logoutSuccess,(function(){return p})),Object(f.a)(c,d.getCurrentUserSuccess,(function(t,e){return e.payload})),c)),g=Object(o.c)(null,(r={},Object(f.a)(r,d.registerSuccess,(function(t,e){return e.payload.token})),Object(f.a)(r,d.loginSuccess,(function(t,e){return e.payload.token})),Object(f.a)(r,d.logoutSuccess,(function(){return null})),r)),m=function(t,e){return e.payload},v=Object(o.c)(null,(a={},Object(f.a)(a,d.registerError,m),Object(f.a)(a,d.loginError,m),Object(f.a)(a,d.logoutError,m),Object(f.a)(a,d.getCurrentUserError,m),a)),x=Object(h.b)({user:O,token:g,error:v}),C=n(11),k=n.n(C),y=n(18),S=n(12),E=n.n(S);E.a.defaults.baseURL="https://connections-api.herokuapp.com";var R=function(t){E.a.defaults.headers.common.Authorization="Bearer ".concat(t)},q=function(){E.a.defaults.headers.common.Authorization=""},w={register:function(t){return function(){var e=Object(y.a)(k.a.mark((function e(n){var c;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(d.registerRequest()),e.prev=1,e.next=4,E.a.post("https://connections-api.herokuapp.com/users/signup",t);case 4:c=e.sent,R(c.data.token),n(d.registerSuccess(c.data)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),n(d.registerError(e.t0.message));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},logIn:function(t){return function(){var e=Object(y.a)(k.a.mark((function e(n){var c;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(d.loginRequest()),e.prev=1,e.next=4,E.a.post("https://connections-api.herokuapp.com/users/login",t);case 4:c=e.sent,R(c.data.token),n(d.loginSuccess(c.data)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),n(d.loginError(e.t0.message));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},logOut:function(){return function(){var t=Object(y.a)(k.a.mark((function t(e){return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(d.logoutRequest()),t.prev=1,t.next=4,E.a.post("https://connections-api.herokuapp.com/users/logout");case 4:q(),e(d.logoutSuccess()),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),e(d.logoutError(t.t0.message));case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},getCurrentUser:function(){return function(){var t=Object(y.a)(k.a.mark((function t(e,n){var c,r,a;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c=n(),r=c.auth.token){t.next=3;break}return t.abrupt("return");case 3:return R(r),e(d.getCurrentUserRequest()),t.prev=5,t.next=8,E.a.get("https://connections-api.herokuapp.com/users/current");case 8:a=t.sent,e(d.getCurrentUserSuccess(a.data)),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(5),e(d.getCurrentUserError(t.t0.message));case 15:case"end":return t.stop()}}),t,null,[[5,12]])})));return function(e,n){return t.apply(this,arguments)}}()}},U={getIsAuthenticated:function(t){return Boolean(t.auth.token)},getUsername:function(t){return t.auth.user.name}}},32:function(t,e,n){"use strict";n.d(e,"b",(function(){return O})),n.d(e,"d",(function(){return v})),n.d(e,"a",(function(){return p})),n.d(e,"c",(function(){return U}));var c,r=n(11),a=n.n(r),o=n(18),s=n(12),u=n.n(s),i=n(2),l=Object(i.b)("contacts/fetchContactsRequest"),b=Object(i.b)("contacts/fetchContactsSuccess"),j=Object(i.b)("contacts/fetchContactsError"),d=Object(i.b)("contacts/addContactSuccess"),f=Object(i.b)("contacts/addContactsError"),h=Object(i.b)("contacts/addContactRequest"),p={fetchContactsRequest:l,fetchContactsSuccess:b,fetchContactsError:j,changeFilter:Object(i.b)("contacts/filter"),addContactRequest:h,addContactSuccess:d,addContactsError:f,deleteContactSuccess:Object(i.b)("contacts/deleteContactSuccess"),deleteContactsError:Object(i.b)("contacts/deleteContactsError"),deleteContactRequest:Object(i.b)("contacts/deleteContactRequest")},O={submit:function(t){var e=t.name,n=t.number;return function(){var t=Object(o.a)(a.a.mark((function t(c){var r,o,s;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r={name:e,number:n},c(p.addContactRequest()),t.prev=2,t.next=5,u.a.post("/contacts",r);case 5:o=t.sent,s=o.data,c(p.addContactSuccess(s)),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(2),c(p.addContactsError(t.t0.message));case 13:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(e){return t.apply(this,arguments)}}()},deleteContact:function(t){return function(e){e(p.deleteContactRequest()),u.a.delete("/contacts/".concat(t)).then((function(){return e(p.deleteContactSuccess(t))})).catch((function(t){return e(p.deleteContactsError(t.message))}))}},fetchContacts:function(){return function(t){t(p.fetchContactsRequest()),u.a.get("/contacts").then((function(e){var n=e.data;return t(p.fetchContactsSuccess(n))})).catch((function(e){return t(p.fetchContactsError(e.message))}))}}},g=n(20),m=function(t){return t.contacts.filter},v={getValue:m,getVisibleContacts:Object(g.a)([m,function(t){return t.contacts.items}],(function(t,e){var n=t.toLowerCase();return e.filter((function(t){return t.name.toLowerCase().includes(n)}))}))},x=n(5),C=n(27),k=n(6),y=p.fetchContactsSuccess,S=p.addContactSuccess,E=p.deleteContactSuccess,R=p.changeFilter,q=Object(i.c)([],(c={},Object(x.a)(c,y,(function(t,e){return e.payload})),Object(x.a)(c,S,(function(t,e){var n=e.payload;return t.map((function(t){return t.name})).includes(n.name)?alert("".concat(n.name," is already in contacts.")):[n].concat(Object(C.a)(t))})),Object(x.a)(c,E,(function(t,e){var n=e.payload;return t.filter((function(t){return t.id!==n}))})),c)),w=Object(i.c)("",Object(x.a)({},R,(function(t,e){return e.payload}))),U=Object(k.b)({items:q,filter:w})},48:function(t,e,n){},80:function(t,e,n){"use strict";n.r(e);var c=n(0),r=n.n(c),a=n(26),o=n.n(a),s=(n(48),n(22)),u=n(23),i=n(25),l=n(24),b=n(4),j=n(1),d=function(t){Object(i.a)(n,t);var e=Object(l.a)(n);function n(){return Object(s.a)(this,n),e.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(j.jsx)("div",{className:"preloader",children:Object(j.jsxs)("div",{className:"preloader__row",children:[Object(j.jsx)("div",{className:"preloader__item"}),Object(j.jsx)("div",{className:"preloader__item"})]})})}}]),n}(c.Component),f=n(17),h=n(15),p="/",O="/register",g="/login",m="/contacts",v={link:{display:"inline-block",textDecoration:"none",padding:12,fontWeight:700,color:"#2A363B"},activeLink:{color:"#E84A5F"}},x=function(){return Object(j.jsxs)("nav",{children:[Object(j.jsx)(h.b,{to:p,exact:!0,style:v.link,activeStyle:v.activeLink,children:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"}),Object(j.jsx)(h.b,{to:m,exact:!0,style:v.link,activeStyle:v.activeLink,children:"\u0417\u0430\u043c\u0435\u0442\u043a\u0438"})]})},C=n(14),k=n.p+"static/media/default-avatar.e44fc4e2.png",y={container:{display:"flex",alignItems:"center"},avatar:{marginRight:4},name:{fontWeight:700,marginRight:12}},S={onLogout:C.a.logOut},E=Object(f.b)((function(t){return{name:C.c.getUsername(t),avatar:k}}),S)((function(t){var e=t.avatar,n=t.name,c=t.onLogout;return Object(j.jsxs)("div",{style:y.container,children:[Object(j.jsx)("img",{src:e,alt:"",width:"32",style:y.avatar}),Object(j.jsxs)("span",{style:y.name,children:["Welcome, ",n]}),Object(j.jsx)("button",{type:"button",onClick:c,children:"Logout"})]})})),R={link:{display:"inline-block",textDecoration:"none",padding:12,fontWeight:700,color:"#2A363B"},activeLink:{color:"#E84A5F"}},q=function(){return Object(j.jsxs)("div",{children:[Object(j.jsx)(h.b,{to:O,exact:!0,style:R.link,activeStyle:R.activeLink,children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(j.jsx)(h.b,{to:g,exact:!0,style:R.link,activeStyle:R.activeLink,children:"\u041b\u043e\u0433\u0438\u043d"})]})},w=Object(f.b)((function(t){return{isAuthenticated:C.c.getIsAuthenticated(t)}}))((function(t){var e=t.isAuthenticated;return Object(j.jsxs)("header",{className:"Nav",children:[Object(j.jsx)(x,{}),e?Object(j.jsx)(E,{}):Object(j.jsx)(q,{})]})})),U=Object(c.lazy)((function(){return n.e(4).then(n.bind(null,92))})),L=Object(c.lazy)((function(){return n.e(6).then(n.bind(null,93))})),A=Object(c.lazy)((function(){return n.e(5).then(n.bind(null,94))})),z=Object(c.lazy)((function(){return n.e(3).then(n.bind(null,95))})),N=function(t){Object(i.a)(n,t);var e=Object(l.a)(n);function n(){return Object(s.a)(this,n),e.apply(this,arguments)}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.props.onGetCurrentUser()}},{key:"render",value:function(){return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(w,{}),Object(j.jsx)(c.Suspense,{fallback:Object(j.jsx)(d,{}),children:Object(j.jsxs)(b.c,{children:[Object(j.jsx)(b.a,{exact:!0,path:p,component:U}),Object(j.jsx)(b.a,{exact:!0,path:O,component:L}),Object(j.jsx)(b.a,{path:g,component:A}),Object(j.jsx)(b.a,{path:m,component:z}),Object(j.jsx)(b.a,{component:U})]})})]})}}]),n}(c.Component),_={onGetCurrentUser:C.a.getCurrentUser},B=Object(f.b)(null,_)(N),F=n(27),I=n(2),W=n(16),D=n(32),G=n(42),J=n.n(G),M=Object(F.a)(Object(I.d)({serializableCheck:{ignoredActions:[W.a,W.f,W.b,W.c,W.d,W.e]}})),V={key:"auth",storage:J.a,whitelist:["token"]},H=Object(I.a)({reducer:{contacts:D.c,auth:Object(W.g)(V,C.b)},middleware:M,devContacts:!1}),K={store:H,persistor:Object(W.h)(H)},P=n(43);o.a.render(Object(j.jsx)(r.a.StrictMode,{children:Object(j.jsx)(f.a,{store:K.store,children:Object(j.jsx)(P.a,{loading:null,persistor:K.persistor,children:Object(j.jsx)(h.a,{children:Object(j.jsx)(B,{})})})})}),document.getElementById("root"))}},[[80,1,2]]]);
//# sourceMappingURL=main.8b108e97.chunk.js.map